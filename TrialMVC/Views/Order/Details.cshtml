@model FilteredOrderItemsInOrderViewModel

@{
	ViewData["Title"] = "Order Details";
}


<div class="container p-3">
	<div class="row pt-4">

		<div class="col-6">
			<h2 class="text-primary"> Order Details </h2>
		</div>

		<div class="col-6 text-end">
			<a asp-controller="Order" asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">
				<i class="fas fa-edit"></i> Edit
			</a>
			<a asp-controller="Order" asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger">
				<i class="fas fa-trash-alt"></i> Delete
			</a>
		</div>

	</div>

	<div class="mb-3">
		<label asp-for="Number" class="form-label"> Order Name </label>
		<input asp-for="Number" disabled class="form-control col-4">
	</div>

	<div class="mb-3">
		<label asp-for="Date" class="form-label"> Date </label>
		<input asp-for="Date" disabled class="form-control">
	</div>

	<div class="mb-3">
		<label asp-for="ProviderId" class="form-label"> Provider </label>
		<select asp-for="ProviderId" disabled class="form-select" asp-items=@Model.ProvidersSelectList>
		</select>
	</div>

	<br />
	<h3> Order Items </h3>
	<hr />

	<h2 class="text-center text-primary"> Filters </h2>

	<form asp-controller="Order" asp-action="Details" method="post">
		<div class="row flex-fill">

			<input type="hidden" asp-for="@Model.Id" />
			<input type="hidden" asp-for="@Model.Date" />
			<input type="hidden" asp-for="@Model.Number" />
			<input type="hidden" asp-for="@Model.ProviderId" />

			<div class="form-group row col-2 mb-2">
				<select miltiple asp-for="@Model.OrderItemsNameList" class="form-select" asp-items=@Model.OrderItemsNameSelectList>
					<option disabled selected> Item Name </option>
				</select>
			</div>

			<div class="form-group row col-2 mb-2">
				<select miltiple asp-for="@Model.OrderItemsUnitList" class="form-select" asp-items=@Model.OrderItemsUnitSelectList>
					<option disabled selected> Item Unit </option>
				</select>
			</div>

			</br>

			<button type="submit" asp-controller="Order" asp-action="Details" class="btn btn-primary mb-2"> Filter </button>
			<button type="reset" class="btn btn-primary"> Reset </button>

		</div>
	</form>

	@if (Model.OrderItems.Count() > 0)
	{
		<table class="table table-bordered table-striped" style="width:100%">

			<thead>
				<tr>
					<th> Name </th>
					<th> Quantity </th>
					<th> Unit </th>
					<th></th>
				</tr>
			</thead>

			<tbody>
				@foreach (var item in Model.OrderItems)
				{
					<tr>
						<td style="width:25%"> @item.Name </td>
						<td style="width:25%"> @item.Quantity </td>
						<td style="width:25%"> @item.Unit </td>

						<td class="text-center" style="width:25%">
							<div>
								<a asp-controller="OrderItem" asp-action="Edit" asp-route-id="@item.Id" class="btn btn-primary mx-1">
									<i class="fas fa-edit"></i>
								</a>
								<a asp-controller="OrderItem" asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger mx-1">
									<i class="fas fa-trash-alt"></i>
								</a>
							</div>
						</td>
					</tr>
				}
			</tbody>

		</table>
	}
	else
	{
		<p> No order items exist. </p>
	}

	<a asp-controller="OrderItem" asp-action="Create" asp-route-id="@Model.Id" class="btn btn-success">
		<i class="fas fa-plus"></i> Add Item
	</a>
	<a asp-controller="Order" asp-action="Index" class="btn btn-primary">
		<i class="fa fa-sign-out-alt"></i> Back
	</a>

</div>